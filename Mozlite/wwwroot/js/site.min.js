(function(n){n.fn.dset=function(n,t){var i=this.data(n);return i?this.data(n):(i=t(),this.data(n,i),i)};n.fn.exec=function(t){return this.length>0?this.each(function(){var i=n(this);i.hasClass("no-js")||t(i)}):this};window.$alert=function(t,i,r){var u,f,e;(typeof t=="object"&&t&&(i=t.type,t=t.message),t)&&(u=n(document.body).dset("alert",function(){return n('<div class="js-alert modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-body" style="padding: 50px 30px 30px;"><div class="col-sm-2"><i style="font-size: 50px;"><\/i><\/div> <span class="col-sm-10" style="line-height: 26px; padding-left: 0;"><\/span><\/div><div class="modal-footer"><button type="button" class="btn btn-primary"><i class="fa fa-check"><\/i> 确定<\/button><\/div><\/div><\/div><\/div>').appendTo(document.body)}),f=u.find(".modal-body"),i=i||"warning",i==="success"?f.attr("class","modal-body row text-success").find("i").attr("class","fa fa-check"):f.attr("class","modal-body row text-"+i).find("i").attr("class","fa fa-warning"),f.find("span").html(t),e=u.find("button").attr("class","btn btn-"+i),r?e.removeAttr("data-dismiss").bind("click",function(){r(u.data("bs.modal"));u.data("bs.modal").hide()}):e.attr("data-dismiss","modal").unbind("click"),u.modal("show"))};window.$ajax=function(t,i,r,u){n("#js-loading").fadeIn();n.ajax({url:t,data:i,dataType:"JSON",type:"POST",success:function(t){n("#js-loading").fadeOut();var i=t.data&&r;t.message&&t.type&&$alert(t.message,t.type,t.type==="success"&&!i);i&&r(t.data)},error:function(t){if(n("#js-loading").fadeOut(),t.status===401){$alert('需要登陆才能够执行此操作！<a onclick="$(this).jsModal(\'/login\');" href="javascript:;">点击登陆...<\/a>',"warning");return}u?u(t):document.write(t.responseText)}})}})(jQuery);