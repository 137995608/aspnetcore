@page
@model IndexModel
@{
    ViewBag.Title = "权限列表";
    ViewBag.Current = "users.permissions";
    var current = false;
}

<ul class="nav nav-tabs" role="tablist">
    @foreach (var key in Model.Permissions.Keys)
    {
        <li class="nav-item" .class-active="!current">
            <a .class-active="!current" class="nav-link" id="@(key)-tab" data-toggle="tab" href="#@(key)" role="tab" aria-controls="home" aria-selected="true">@Model.Localizer[key]</a>
        </li>
        current = true;
    }
</ul>
<div class="tab-content pb-0">
    @foreach (var key in Model.Permissions.Keys)
    {
        var model = Model.Permissions[key];
        var index = 0;
        var count = model.Count - 1;
        <div .class-active="current" .class-in="current" class="tab-pane fade" id="@key" role="tabpanel" aria-labelledby="@(key)-tab">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>名称</th>
                        <th>描述</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var permission in model)
                    {
                        <tr>
                            <td>
                                @permission.Text
                                <div class="data-action d-inline pull-right">
                                    <a .visible="index>0" js-action="post" js-data-id="@permission.Id" js-data-category="@permission.Category" title="向上移动" asp-page-handler="MoveUp"><i class="fa fa-arrow-up"></i></a>
                                    <a .visible="index<count" js-action="post" js-data-id="@permission.Id" js-data-category="@permission.Category" title="向下移动" asp-page-handler="MoveDown"><i class="fa fa-arrow-down"></i></a>
                                </div>
                            </td>
                            <td>@permission.Description</td>
                        </tr>
                        index++;
                    }
                </tbody>
            </table>
        </div>
        current = false;
    }
</div>